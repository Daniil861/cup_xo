(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)})),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",1e4),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".wrapper_game")&&(+sessionStorage.getItem("money")>=100?(document.querySelector(".bet").textContent=100,sessionStorage.setItem("current-bet",100)):(document.querySelector(".bet").textContent=0,sessionStorage.setItem("current-bet",0)));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper");function n(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function s(e,t){return Math.floor(Math.random()*(t-e)+e)}let r=document.querySelectorAll(".item-score__icon img");document.querySelector(".item-score__icon img")&&setInterval((()=>{!function(){let e=s(0,3),t=["jump","scale","rotate"],o=s(0,r.length);r.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{r[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4),document.querySelector(".main__body")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main__body").classList.add("_active");const i={current_win:0};function c(){i.current_win>0?document.querySelector(".win").textContent=`+${i.current_win}`:document.querySelector(".win").textContent=0}var a;document.querySelector(".slot__body")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".slot__body").classList.add("_active"),c());class m{constructor(e,t={}){u.preload(),this.currentSymbols=[["1","2","3"],["2","3","4"],["4","3","2"],["3","4","5"],["5","2","3"]],this.nextSymbols=[["1","2","3"],["2","3","4"],["4","3","2"],["3","4","5"],["5","2","3"]],this.container=e,this.reels=Array.from(this.container.getElementsByClassName("reel")).map(((e,t)=>new l(e,t,this.currentSymbols[t]))),this.betButton=document.querySelector(".buttons__bet"),this.betButton.addEventListener("click",(()=>{+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")+100?(document.querySelector(".bet").textContent=+document.querySelector(".bet").innerHTML+100,sessionStorage.setItem("current-bet",document.querySelector(".bet").innerHTML)):n(".check")})),this.spinButton=document.querySelector(".buttons__spin"),this.spinButton.addEventListener("click",(()=>{+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")?this.spin():n(".check")})),this.casinoAutoSpinCount=0,this.autoSpinButton=document.querySelector(".buttons__auto"),this.autoSpinButton.addEventListener("click",(()=>{var e=this;this.casinoAutoSpinCount=0,+sessionStorage.getItem("money")>+sessionStorage.getItem("current-bet")&&(this.casinoAutoSpinCount++,this.spin()),a=setInterval((function(){e.casinoAutoSpinCount++,e.casinoAutoSpinCount<10&&+sessionStorage.getItem("money")>=+sessionStorage.getItem("current-bet")?e.spin():(clearInterval(a),n(".check"))}),5500)})),t.inverted&&this.container.classList.add("inverted"),this.config=t}spin(){return function(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}(+sessionStorage.getItem("current-bet"),".check"),this.currentSymbols=this.nextSymbols,this.nextSymbols=[[u.random(),u.random(),u.random()],[u.random(),u.random(),u.random()],[u.random(),u.random(),u.random()],[u.random(),u.random(),u.random()],[u.random(),u.random(),u.random()]],this.onSpinStart(this.nextSymbols),Promise.all(this.reels.map((e=>(e.renderSymbols(this.nextSymbols[e.idx]),e.spin())))).then((()=>this.onSpinEnd(this.nextSymbols)))}onSpinStart(e){this.spinButton.classList.add("_hold"),this.autoSpinButton.classList.add("_hold"),this.betButton.classList.add("_hold"),this.config.onSpinStart?.(e)}onSpinEnd(e){this.spinButton.classList.remove("_hold"),this.autoSpinButton.classList.remove("_hold"),this.betButton.classList.remove("_hold"),this.config.onSpinEnd?.(e)}}class l{constructor(e,t,o){this.reelContainer=e,this.idx=t,this.symbolContainer=document.createElement("div"),this.symbolContainer.classList.add("icons"),this.reelContainer.appendChild(this.symbolContainer),this.animation=this.symbolContainer.animate([{transform:"none",filter:"blur(0)"},{filter:"blur(2px)",offset:.5},{transform:`translateY(-${10*Math.floor(this.factor)/(3+10*Math.floor(this.factor))*100}%)`,filter:"blur(0)"}],{duration:1e3*this.factor,easing:"ease-in-out"}),this.animation.cancel(),o.forEach((e=>this.symbolContainer.appendChild(new u(e).img)))}get factor(){return 1+Math.pow(this.idx/2,2)}renderSymbols(e){const t=document.createDocumentFragment();for(let o=3;o<3+10*Math.floor(this.factor);o++){const n=new u(o>=10*Math.floor(this.factor)-2?e[o-10*Math.floor(this.factor)]:void 0);t.appendChild(n.img)}this.symbolContainer.appendChild(t)}spin(){const e=new Promise((e=>this.animation.onfinish=e)),t=new Promise((e=>setTimeout(e,1e3*this.factor)));return this.animation.play(),Promise.race([e,t]).then((()=>{"finished"!==this.animation.playState&&this.animation.finish();const e=this.symbolContainer.children.length-3;for(let t=0;t<e;t++)this.symbolContainer.firstChild.remove()}))}}const d={};class u{constructor(e=u.random()){this.name=e,d[e]?this.img=d[e].cloneNode():(this.img=new Image,this.img.src=`img/game-1/slot-${e}.png`,document.querySelector(".wrapper_game-1")?this.img.src=`img/game-1/slot-${e}.png`:document.querySelector(".wrapper_game-2")?this.img.src=`img/game-2/slot-${e}.png`:document.querySelector(".wrapper_game-3")&&(this.img.src=`img/game-3/slot-${e}.png`),d[e]=this.img)}static preload(){u.symbols.forEach((e=>new u(e)))}static get symbols(){return["1","2","3","4","5"]}static random(){return this.symbols[Math.floor(Math.random()*this.symbols.length)]}}const h={inverted:!1,onSpinStart:e=>{},onSpinEnd:e=>{if(e[0][0]==e[1][0]&&e[1][0]==e[2][0]&&e[2][0]==e[3][0]&&e[3][0]==e[4][0]||e[0][1]==e[1][1]&&e[1][1]==e[2][1]&&e[2][1]==e[3][1]&&e[3][1]==e[4][1]||e[0][2]==e[1][2]&&e[1][2]==e[2][2]&&e[2][2]==e[3][2]&&e[3][2]==e[4][2]){s=300,i.current_win+=100*s,c();let e=100*+sessionStorage.getItem("current-bet");t=e,o=".check",n=2e3,setTimeout((()=>{document.querySelectorAll(o).forEach((e=>e.textContent=+sessionStorage.getItem("money")+t)),document.querySelectorAll(o).forEach((e=>e.classList.add("_anim-add-money"))),sessionStorage.setItem("money",+sessionStorage.getItem("money")+t)}),1e3),setTimeout((()=>{document.querySelectorAll(o).forEach((e=>e.classList.remove("_anim-add-money")))}),n)}var t,o,n,s}};if(document.querySelector(".wrapper_game")){new m(document.getElementById("slot"),h)}document.addEventListener("click",(e=>{let s=e.target;if(s.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main__body")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main__body").classList.add("_active")),s.closest(".block-bet__minus")){let e=+sessionStorage.getItem("current-bet");e>=50&&(sessionStorage.setItem("current-bet",e-50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet"))}if(s.closest(".block-bet__plus")){let e=+sessionStorage.getItem("current-bet");+sessionStorage.getItem("money")-49>e?(sessionStorage.setItem("current-bet",e+50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):n(".check")}})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();